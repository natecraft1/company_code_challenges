<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
Hey	2

<script>
console.log(letsDoThis("c a b e d", "a b c d e"));
	function letsDoThis(h1, h2) {
		var h1Split = h1.split(" ");
		var h2Split = h2.split(" ");
		var h1Tags = h1Split.map(function(element) {
			return breakdown(element)[0];
		});
		var h2Tags = h2Split.map(function(element) {
			return breakdown(element)[0];
		});
		console.log(h1Tags, h2Tags);

		var commonElements = [];
		h1Tags.forEach(function(e, i) {
			var index = h2Tags.indexOf(e);
			if (index != -1) commonElements.push({"element": e, "index": index})
		});
console.log(JSON.stringify(commonElements));
	var arrOfIndices = commonElements.map(function(e) {
		return e.index;
	});

	var max = Math.max.apply(null, arrOfIndices);
	function getOrder(ce, i) {
		var ordered = [ce[i].index];
		for (j = i+1; j<ce.length;j++) {
			if (ce[i].index < ce[j].index) ordered.push(ce[j].index);
		}
		return ordered;
	}
	console.log(perms(commonElements));
	var possibilities = [];
	function perms(arr) {
		var lowest = arr[0].index;
		for (i=0;i<arr.length;i++) {
			if (arr[i].index <= lowest) {
				var order = getOrder(arr, i);
				lowest = order[0];
				// makePerm(order);
			}
			console.log(order);
		}
	}
	// makePerm([2,3,5,4,6], 0);
	// makePerm([2,5,3,4], 0);
	console.log(possibilities);

	// function makePerm(ar,idx) {
	// 	console.log("makeperm", ar, idx);
	// 	var cool = true;
	// 	if (idx >= ar.length-1 && cool) { 
	// 		console.log("pushing");
	// 		possibilities.push(ar); return; 
	// 	} 
	// 	for (var i=idx;i<ar.length-1;i++) {
	// 		if (ar[i] > ar[i+1]) {
				
	// 			cool = false;
	// 			var arOne = ar.slice(0);
	// 			arOne.splice(arOne.indexOf(ar[i]), 1);
	// 			makePerm(arOne, i);
	// 			// makePerm([2,3,4], 1);
	// 			//
	// 			var arTwo = ar.slice(0);
	// 			arTwo.splice(arTwo.indexOf(ar[i+1]), 1);
	// 			possibilities.push(arTwo);
	// 			// makePerm([2,5,4], 2);
	// 			// pushes and returns;
	// 		}
	// 	}
	// 	if (cool) possibilities.push(ar);
	// }

	console.log(makePerm([2,5,1,4,6]));
	// [[2,3,5], [2,3,4]]
	function makePerm(ar) {
		var newArr = [[ar[0]]];

		for (var i=0; i<ar.length-1;i++) {	
			newArr.forEach(function(array) {
				if (array[array.length-1]<ar[i+1]) {
					array.push(ar[i+1]);
				} else {
					var clone = array.slice(0);
					clone.pop();
					if (clone[clone.length-1] < ar[i+1]) {
						clone.push(ar[i+1]);
						newArr.push(clone);
					} else {
						newArr.push([ar[i+1]]);
					}
					// console.log(newArr);
				}
			});
		}
		return newArr;
	}

		// look for lessThan's
// 		var lessThans = [];
// 		for (i = 0; i < commonElements.length; i++) {
// 			if (i == commonElements.length-1) {
// 				lessThans.push(true);
// 			} else {
// 				if (commonElements[i].index < commonElements[i+1].index) {
// 					lessThans.push(true);
// 				} else {
// 					lessThans.push(false);
// 				} 
// 			}
// 		}
// console.log(lessThans);
	
	

	// var breakpoints = [0];
	// ar2 = ar.reduce(function(p,c,i) { 
	// 	if (p.index > c.index) { breakpoints.push(i) }; 
	// 	return c;
	// });

		// [2 > 0 < 1 < 4 > 3]
		// now we find the potential correctly ordered sequences.
		// sequences(commonElements);
// 		function sequences(ar) {
// 			var potential = [];
// 			ar.reduce(function(previous, current) {
// console.log(previous, current);
// 				if (previous.index < current.index) {
// 					return
// 				}
// 			}, []);
// 		}

	}
	// a c d b
	// a is in place so look at c d b 
	// c < d > b
	// put it in its index

	// c a b d 
	// c > a < b < d

	// d c a b 
 	// d > c > a < b
 	//  how do we decide whether to remove d & c or a & b 
 	// amount of elements we have to remove + amount it would take to rebuild them from the second array
 	// c < d > a < b
 	// last greater than...?

 	// e > c > a < b < d
 	// a b d

 	// c > a < b < e > d
  // a b e are in order, b < d ? a b d are in order : a b are in order
  // 2 possibilities a b e, and a b d 
  // h2[e] > h2[d] ? move d : move e



	function breakdown(str) {
		return str.split(/(?=[#.])/);
	}
</script>
</body>
</html>
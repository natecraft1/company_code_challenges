<!doctype html>
<html lang="en" ng-app>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="https://cdn.jsdelivr.net/snap.svg/0.2.0/snap.svg-min.js"></script>
	<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="bucket1" class="bucket"></div>
<!-- <div id="bucket2" class="bucket">0</div>
 -->
<!--  <ul>
	<li><button class="b1 fill">Fill</button></li>
	<li><button class="b1 transfer">Pour</button></li>
	<li><button class="b1 empty">Empty</button></li>
	<li><button class="b2 fill">Fill</button></li>
	<li><button class="b2 transfer">Pour</button></li>
	<li><button class="b2 empty">Empty</button></li>
</ul> -->
<!-- <table>
	<thead>
		<tr>
			<th></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		
	</tbody>
</table> -->
<script>

// 	var width = 800; 
// 	var s = Snap(width,600);
// 	var aspect_ratio = 822/567;
// 	var lake = s.image("imgs/lake-figure-color.svg", 0, -100, width, width/aspect_ratio);
// 	// I couldn't find out how to obtain this dynamically because lake.attr("width") didnt work, 
// 	// and there is no callback for Snap.image 

// 	// lake.attr("width") wasn't working so...
// 	var current_scale = 1;
// 	var current_width = 800;
// 	var current_height = current_width/aspect_ratio;
// 	var scale_factor = current_scale * 1.2;
// 	var translateX = -(scale_factor*current_width-current_width)/2;
// 	var translateY = -(scale_factor*current_height-current_height)/2;
// 	var m = new Snap.Matrix();
// 	m.scale(scale_factor, scale_factor, 0, -100);
// 	m.translate(translateX, translateY);

// 	lake.animate({ "transform": m }, 2000, function() {
// 		m.scale(current_scale/scale_factor, current_scale/scale_factor, 0, -100);
// 		m.translate(-translateX, -translateY);
// 		lake.animate({ "transform": m }, 2000);
// 	});

//  	var step = {
// 		"count": 0,
// 		"check": function() {
// 			console.log(buckets.b1.height, buckets.b2.height);
// 			return buckets.b1.height == buckets.gallons || buckets.b2.height == buckets.gallons;
// 		}
// 	}
// 	var b1CurrentHeight = b2CurrentHeight = 0;
// 	var b1Element = document.getElementById("bucket1"), b2Element = document.getElementById("bucket2");
// 	var buckets = { 
// 		"b1": {"elem": b1Element, "size": 5}, 
// 	  "b2": {"elem": b2Element, "size": 3}
// 	};

// 	Object.defineProperty(buckets.b1, "currentHeight", {
// 		get: function() { return b1CurrentHeight; },
// 		set: function(newVal) { 
// 			b1CurrentHeight = newVal;
// 			updateBuckets.call(this);
// 		}
// 	});
// 	Object.defineProperty(buckets.b2, "currentHeight", {
// 		get: function() { return b2CurrentHeight; },
// 		set: function(newVal) { 
// 			b2CurrentHeight = newVal;
// 			updateBuckets.call(this);
// 		}
// 	});
// 	// water(5, 11, 4);
// 	// console.log(step);

// 	function water(x,y,z) {
// 		buckets.b1.size = x;
// 		buckets.b2.size = y;
// 		buckets.gallons = z;
// 		while (!step.check() && step.count < 100) {
// 			if (buckets.b2.currentHeight == 0) {
// 				fill(buckets.b2);
// 			} else if (buckets.b2.currentHeight == buckets.b2.size
// 				|| buckets.b1.height == 0) {
// 				transfer(buckets.b2, buckets.b1);
// 			} else if (buckets.b1.currentHeight == buckets.b1.size) {
// 				empty(buckets.b1);
// 			}
// 			step.count += 1;
// 		}
// 	}
// 	function fill(bucket) {
// 		bucket.currentHeight = bucket.size;
// 	}
// 	function transfer(from, to) {
// 		var alotted = to.size - to.currentHeight;
// 		var desired = from.currentHeight;
// 		var transfer_amount = desired > alotted ? alotted : desired;
// 		from.currentHeight -= transfer_amount;
// 		to.currentHeight += transfer_amount;
// 	}
// 	function empty(bucket) {
// 		bucket.currentHeight = 0;
// 	}
// 	function updateBuckets () {
// 		this.elem.innerHTML = this.currentHeight;
// 	}
// 	document.getElementsByTagName("ul")[0].onclick = function(e) {
// 		var c = e.target.className.split(" ");
// 		var bucket = c[0];
// 		var action = c[1];
// 		// if our functions were not in window, and we didn't want to use eval we'd do this with a switch statement.  
// 		var fn = window[action];
// 		if (typeof fn === "function") { 
// 			if (action === "transfer") {
// 				fn(buckets[bucket], buckets[bucket === "b1" ? "b2" : "b1"]);
// 			} else {
// 				fn(buckets[bucket]);
// 			}
// 		}
// 		stepHistory();
// 	}
// 	var table = document.getElementsByTagName("table")[0];
// 	table.children[0].children[0].children[0].innerHTML = buckets.b1.size;
// 	table.children[0].children[0].children[1].innerHTML = buckets.b2.size;
// 	function stepHistory() {
// 		var tr = document.createElement("tr");
// 		var td1 = document.createElement("td");
// 		var td2 = document.createElement("td");
// 		td1.innerHTML = buckets.b1.currentHeight;
// 		td2.innerHTML = buckets.b2.currentHeight;
// 		tr.appendChild(td1);
// 		tr.appendChild(td2);
// 		table.children[0].appendChild(tr);
// 	}

</script>
</body>
</html>